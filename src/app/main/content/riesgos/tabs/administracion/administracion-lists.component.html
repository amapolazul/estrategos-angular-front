<div id="administracion-lists" class="p-24" fxFlex="100%">

  <div class="mat-title">Administraci√≥n del Riesgo</div>

  <div class="mat-white-bg mat-elevation-z4 p-24" fxLayout="column">

    <div class="button-row">
      <div>
        <div>
          <mat-form-field fxFlex="">
            <input matInput name="bcc" placeholder="Proceso / Subproceso" disabled fxFlex="" [value]="proceso.proceso_Nombre">
          </mat-form-field>
        </div>
        <div>
          <mat-form-field>
            <input matInput name="bcc" placeholder="Fecha" disabled [value]="ejercicio.fecha_creacion_ejercicio | date:'yyyy/MM/dd'">
          </mat-form-field>
          <mat-form-field fxFlex="">
            <input matInput name="bcc" placeholder="Nombre del ejercicio" disabled [value]="ejercicio.descripcion">
          </mat-form-field>
        </div>
      </div>

      <button mat-raised-button color="primary" (click)="nuevoDeclaracionRiesgo()">Nuevo</button>
      <button mat-raised-button color="primary" (click)="abrirMapaProbabilidadImpacto()">Mapa de calor</button>
      <button mat-raised-button color="primary" (click)="abrirGraficaCausasRiesgos()">Riesgos por causas</button>
    </div>

    <div class="content p-24">

      <div class=" mat-elevation-z8">

        <ngx-datatable class="material"
                       [rows]="rows"
                       [loadingIndicator]="loadingIndicator"
                       [columnMode]="'force'"
                       [headerHeight]="48"
                       [footerHeight]="56"
                       [rowHeight]="'auto'"
                       [scrollbarH]="true"
                       [reorderable]="reorderable"
                       [limit]="10">

          <ngx-datatable-column name="Acciones" [width]="120" [canAutoResize]="false" [sortable]="false">
            <ng-template let-row="row" let-rowIndex="rowIndex" let-id="value" ngx-datatable-cell-template>
              <button class="btn btn-sm btn-danger" (click)="edit(row, rowIndex)">
                <mat-icon _ngcontent-c71="" class="secondary-text s-26 mat-icon material-icons" role="img" aria-hidden="true">edit</mat-icon>
              </button>
              <button class="btn btn-sm btn-danger" (click)="delete(row, rowIndex)">
                <mat-icon _ngcontent-c71="" class="secondary-text s-26 mat-icon material-icons" role="img" aria-hidden="true">delete</mat-icon>
              </button>
            </ng-template>
          </ngx-datatable-column>

          <ngx-datatable-column name="Color" [canAutoResize]="false" [sortable]="false">
            <ng-template let-row="row" let-rowIndex="rowIndex" let-id="value" ngx-datatable-cell-template>
              <div [ngClass]="getCellClass(row)">

              </div>
            </ng-template>
          </ngx-datatable-column>

          <ngx-datatable-column name="Riesgo" prop="factor_riesgo">
          </ngx-datatable-column>

          <ngx-datatable-column name="Probabilidad" prop="probabilidad">
          </ngx-datatable-column>

          <ngx-datatable-column name="Impacto" prop="impacto">
          </ngx-datatable-column>

          <ngx-datatable-column name="Severidad" prop="severidad">
          </ngx-datatable-column>

          <ngx-datatable-column name="Estatus" prop="estatus_riesgo_id">
            <ng-template let-row="row" let-rowIndex="rowIndex" let-id="value" ngx-datatable-cell-template>
              {{row.estatus_riesgo_id === 1  ? 'Pendiente' : 'Mitigado'}}
            </ng-template>
          </ngx-datatable-column>

          <ngx-datatable-column name="Fecha ulitmo ejercicio" prop="fecha_ultimo_ejercicio">
            <ng-template let-row="row" let-rowIndex="rowIndex" let-id="value" ngx-datatable-cell-template>
              {{row.fecha_ejercicio | date:"yyyy/MM/dd"}}
            </ng-template>
          </ngx-datatable-column>

        </ngx-datatable>

      </div>
    </div>

  </div>
</div>
